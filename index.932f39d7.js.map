{"mappings":"AAIA,MAAMA,EAAUC,SAASC,cAAc,gBACjCC,EAAUF,SAASC,cAAc,YACjCE,EAAaH,SAASC,cAAc,cAM1C,IAAIG,EAAO,EACPC,EAAQ,GAEZ,MAAMC,EAAa,CAACC,EAAMC,KAExB,MAAMC,EAAS,IAAIC,gBAAgB,CACjCC,IAVY,qCAWZC,EAAGJ,EACHK,SAVa,GAWbC,KAAAP,EACAQ,WAAY,QACZC,YAAa,aACbC,YAAY,IAGd,OAAOC,MAAM,4BAAeT,EAAOU,cAAcC,MAAKC,IAEpD,IAAKA,EAAIC,GAAI,MAAM,IAAIC,MAAMF,EAAIG,YAEjC,OAAOH,EAAII,MAAM,IAChBL,MAAKC,IAENlB,EAAWuB,UAAUC,OAAO,aAExBN,EAAIO,UA1BK,GA0BkBrB,GAC7BJ,EAAWuB,UAAUG,IAAI,aAGpBR,IACP,EASJ,SAASS,EAAOC,EAAKC,GACnB,MAAMC,EAASF,EAAIG,KAAIC,GAAQ,2CACjBA,EAAKC,oBAAoBD,EAAKE,sGAGvBF,EAAKG,wEAGLH,EAAKI,4EAGFJ,EAAKK,gFAGJL,EAAKM,kDAGrBC,KAAK,IAEd,GAAa,IAATtC,EAEF,YADA4B,EAAUW,UAAYV,GAIxBD,EAAUY,mBAAmB,YAAaX,GAE1C,MAAQY,OAAQC,GAAe9C,SAC9BC,cAAc,YACd8C,kBAAkBC,wBAErBC,OAAOC,SAAS,CACdC,IAAkB,EAAbL,EACLM,SAAU,U,CAaZrD,EAAQsD,iBAAiB,UATzB,SAAqBC,GACnBA,EAAEC,iBAEFnD,EAAO,EACPC,EAAQiD,EAAEE,cAAcC,YAAYC,MAEpCpD,EAAWF,EAAMC,GAAOe,MAAMC,GAAQS,EAAOT,EAAIsC,KAAMzD,I,IAKzDC,EAAWkD,iBAAiB,SArD5B,WACEjD,GAAQ,EACRD,EAAWuB,UAAUG,IAAI,aACzBvB,EAAWF,EAAMC,GAAOe,MAAMC,GAAQS,EAAOT,EAAIsC,KAAMzD,I","sources":["src/index.js"],"sourcesContent":["// 1. замінити картинки\n// 2. PER_PAGE ?? як можна по іншому отримати доступ до per_page\n// 3. де обробляти клас кнопки??\n\nconst formRef = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst buttonMore = document.querySelector('.load-more');\n\nconst API_KEY = '39437968-8994b31ccac94168d8d24ad3e';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 40;\n\nlet page = 1;\nlet query = '';\n\nconst fetchQuery = (page, query) => {\n\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    per_page: PER_PAGE,\n    page,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n  \n  return fetch(`${BASE_URL}?${params.toString()}`).then(res => {\n    \n    if (!res.ok) throw new Error(res.statusText);\n\n    return res.json();\n  }).then(res => {\n\n    buttonMore.classList.remove('is-hidden');\n\n    if (res.totalHits < PER_PAGE * page) {\n      buttonMore.classList.add('is-hidden');\n    }\n\n    return res;\n  })\n};\n\nfunction loadMoreHandler() {\n  page += 1;\n  buttonMore.classList.add('is-hidden');\n  fetchQuery(page, query).then((res) => render(res.hits, gallery));\n}\n\nfunction render(arr, container) {\n  const markup = arr.map(item => `<div class=\"photo-card\">\n    <img src=\"${item.previewURL}\" alt=\"${item.tags}\" loading=\"lazy\" />\n    <div class=\"info\">\n      <p class=\"info-item\">\n        <b>Likes</b> ${item.likes}\n      </p>\n      <p class=\"info-item\">\n        <b>Views</b> ${item.views} \n      </p>\n      <p class=\"info-item\">\n        <b>Comments</b> ${item.comments} \n      </p>\n      <p class=\"info-item\">\n        <b>Downloads</b> ${item.downloads}\n      </p>\n      </div>\n  </div>`).join('');\n\n  if (page === 1) {\n    container.innerHTML = markup;\n    return;\n  }\n\n  container.insertAdjacentHTML('beforeend', markup);\n\n  const { height: cardHeight } = document\n  .querySelector(\".gallery\")\n  .firstElementChild.getBoundingClientRect();\n\nwindow.scrollBy({\n  top: cardHeight * 2,\n  behavior: \"smooth\",\n});\n}\n\nfunction formHandler(e) {\n  e.preventDefault();\n\n  page = 1;\n  query = e.currentTarget.searchQuery.value;\n\n  fetchQuery(page, query).then((res) => render(res.hits, gallery));\n}\n\nformRef.addEventListener('submit', formHandler);\n\nbuttonMore.addEventListener('click', loadMoreHandler);"],"names":["$1f0dc3b9307be026$var$formRef","document","querySelector","$1f0dc3b9307be026$var$gallery","$1f0dc3b9307be026$var$buttonMore","$1f0dc3b9307be026$var$page","$1f0dc3b9307be026$var$query","$1f0dc3b9307be026$var$fetchQuery","page1","query1","params","URLSearchParams","key","q","per_page","page","image_type","orientation","safesearch","fetch","toString","then","res","ok","Error","statusText","json","classList","remove","totalHits","add","$1f0dc3b9307be026$var$render","arr","container","markup","map","item","previewURL","tags","likes","views","comments","downloads","join","innerHTML","insertAdjacentHTML","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","addEventListener","e","preventDefault","currentTarget","searchQuery","value","hits"],"version":3,"file":"index.932f39d7.js.map"}