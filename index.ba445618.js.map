{"mappings":"YAIA,IAAMA,EAAUC,SAASC,cAAc,gBACjCC,EAAUF,SAASC,cAAc,YACjCE,EAAaH,SAASC,cAAc,cAMtCG,EAAO,EACPC,EAAQ,GAENC,EAAa,SAACC,EAAMC,GAExB,IAAMC,EAAS,IAAIC,gBAAgB,CACjCC,IAVY,qCAWZC,EAAGJ,EACHK,SAVa,GAWbC,KAAAP,EACAQ,WAAY,QACZC,YAAa,aACbC,YAAY,IAGd,OAAOC,MAAM,GAAeC,OAlBb,2BAkBU,KAAqBA,OAAlBV,EAAOW,aAAcC,MAAK,SAAAC,GAEpD,IAAKA,EAAIC,GAAI,MAAM,IAAIC,MAAMF,EAAIG,YAEjC,OAAOH,EAAII,M,IACVL,MAAK,SAAAC,GAQN,OANAnB,EAAWwB,UAAUC,OAAO,aAExBN,EAAIO,UA1BK,GA0BkBtB,GAC7BJ,EAAWwB,UAAUG,IAAI,aAGpBR,C,KAUX,SAASS,EAAOC,EAAKC,GACnB,IAAMC,EAASF,EAAIG,KAAI,SAAAC,G,MAAQ,2CACQjB,OAAzBiB,EAAKC,WAAW,WAGTlB,OAHkBiB,EAAKE,KAAK,mGAM5BnB,OAHAiB,EAAKG,MAAM,oEAMRpB,OAHHiB,EAAKI,MAAM,wEAMPrB,OAHDiB,EAAKK,SAAS,yEAGEtB,OAAfiB,EAAKM,UAAU,uC,IAG/BC,KAAK,IAEd,GAAa,IAATvC,EAAJ,CAKA6B,EAAUW,mBAAmB,YAAaV,GAE1C,IAAQW,EAAuB7C,SAC9BC,cAAc,YACd6C,kBAAkBC,wBAFXC,OAIVC,OAAOC,SAAS,CACdC,IAAkB,EAAbN,EACLO,SAAU,U,MAZRnB,EAAUoB,UAAYnB,C,CAyB1BnC,EAAQuD,iBAAiB,UATzB,SAAqBC,GACnBA,EAAEC,iBAEFpD,EAAO,EACPC,EAAQkD,EAAEE,cAAcC,YAAYC,MAEpCrD,EAAWF,EAAMC,GAAOgB,MAAK,SAACC,G,OAAQS,EAAOT,EAAIsC,KAAM1D,E,OAKzDC,EAAWmD,iBAAiB,SArD5B,WACElD,GAAQ,EACRD,EAAWwB,UAAUG,IAAI,aACzBxB,EAAWF,EAAMC,GAAOgB,MAAK,SAACC,G,OAAQS,EAAOT,EAAIsC,KAAM1D,E","sources":["src/index.js"],"sourcesContent":["// 1. замінити картинки\n// 2. PER_PAGE ?? як можна по іншому отримати доступ до per_page\n// 3. де обробляти клас кнопки??\n\nconst formRef = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst buttonMore = document.querySelector('.load-more');\n\nconst API_KEY = '39437968-8994b31ccac94168d8d24ad3e';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 40;\n\nlet page = 1;\nlet query = '';\n\nconst fetchQuery = (page, query) => {\n\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    per_page: PER_PAGE,\n    page,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n  \n  return fetch(`${BASE_URL}?${params.toString()}`).then(res => {\n    \n    if (!res.ok) throw new Error(res.statusText);\n\n    return res.json();\n  }).then(res => {\n\n    buttonMore.classList.remove('is-hidden');\n\n    if (res.totalHits < PER_PAGE * page) {\n      buttonMore.classList.add('is-hidden');\n    }\n\n    return res;\n  })\n};\n\nfunction loadMoreHandler() {\n  page += 1;\n  buttonMore.classList.add('is-hidden');\n  fetchQuery(page, query).then((res) => render(res.hits, gallery));\n}\n\nfunction render(arr, container) {\n  const markup = arr.map(item => `<div class=\"photo-card\">\n    <img src=\"${item.previewURL}\" alt=\"${item.tags}\" loading=\"lazy\" />\n    <div class=\"info\">\n      <p class=\"info-item\">\n        <b>Likes</b> ${item.likes}\n      </p>\n      <p class=\"info-item\">\n        <b>Views</b> ${item.views} \n      </p>\n      <p class=\"info-item\">\n        <b>Comments</b> ${item.comments} \n      </p>\n      <p class=\"info-item\">\n        <b>Downloads</b> ${item.downloads}\n      </p>\n      </div>\n  </div>`).join('');\n\n  if (page === 1) {\n    container.innerHTML = markup;\n    return;\n  }\n\n  container.insertAdjacentHTML('beforeend', markup);\n\n  const { height: cardHeight } = document\n  .querySelector(\".gallery\")\n  .firstElementChild.getBoundingClientRect();\n\nwindow.scrollBy({\n  top: cardHeight * 2,\n  behavior: \"smooth\",\n});\n}\n\nfunction formHandler(e) {\n  e.preventDefault();\n\n  page = 1;\n  query = e.currentTarget.searchQuery.value;\n\n  fetchQuery(page, query).then((res) => render(res.hits, gallery));\n}\n\nformRef.addEventListener('submit', formHandler);\n\nbuttonMore.addEventListener('click', loadMoreHandler);"],"names":["$b8f9b7833fa37166$var$formRef","document","querySelector","$b8f9b7833fa37166$var$gallery","$b8f9b7833fa37166$var$buttonMore","$b8f9b7833fa37166$var$page","$b8f9b7833fa37166$var$query","$b8f9b7833fa37166$var$fetchQuery","page1","query1","params","URLSearchParams","key","q","per_page","page","image_type","orientation","safesearch","fetch","concat","toString","then","res","ok","Error","statusText","json","classList","remove","totalHits","add","$b8f9b7833fa37166$var$render","arr","container","markup","map","item","previewURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","innerHTML","addEventListener","e","preventDefault","currentTarget","searchQuery","value","hits"],"version":3,"file":"index.ba445618.js.map"}